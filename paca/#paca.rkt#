#lang racket/base

;;; import dependencies
(require (prefix-in c: (submod "credentials.rkt" cred))
         (prefix-in u: (submod "credentials.rkt" urls))
         (prefix-in net: net/http-easy ))

;;; Paca Clock
(define (get-clock)
  (net:get (u:curr-clock) #:headers (auth:api)))

(get-clock)

;;; Order
(define (make-order-req
                  #:ticker tk
                  #:qty qt
                  #:side sd
                  #:type tp
                  #:time_in_force tif)
 (hasheq 'symbol tk
         'qty qt
         'side sd
         'type tp
         'time_in_force tif))

(define order
 (lambda (ord)
    (post url
          #:headers auth
          #:json ord)))


;;; Position 
(define (paca/create-order-req-body
                  #:ticker tk
                  #:qty qt
                  #:side sd
                  #:type tp
                  #:time_in_force tif)
 (hasheq 'symbol tk
         'qty qt
         'side sd
         'type tp
         'time_in_force tif))

(define (paca/make-order auth url)
 (lambda (ord)
    (post url
          #:headers auth
          #:json ord)))

(define paca/order (paca/make-order cred url-orders))






